package services

import (
    "github.com/samber/do"
    {{range .Dependencies -}}
    {{.}}Services "benchmark/internal/{{.}}/services"
    {{end}}
)

type {{toPascal .ServiceName}}Service struct {
    {{ if .HasProperties -}} Properties {{- end -}}
    {{- range .Dependencies }}
    {{.}}Svc *{{.}}Services.{{toPascal .}}Service
    {{- end }}
}

func New{{toPascal .ServiceName}}Service(i *do.Injector) (*{{toPascal .ServiceName}}Service, error) {
    {{- range .Dependencies}}
    {{.}}Svc := do.MustInvoke[*{{.}}Services.{{toPascal .}}Service](i)
    {{- end }}

    svc := &{{toPascal .ServiceName}}Service{
    {{- range .Dependencies}}
        {{.}}Svc: {{.}}Svc,
    {{- end}}
    }

    {{ if .HasInitFunction -}} svc.Init() {{- end }}

	return svc, nil
}
